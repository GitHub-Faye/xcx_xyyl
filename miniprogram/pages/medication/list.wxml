<view class="container {{themeVars}}">
  <view class="page-header">
    <view class="page-title">药物提醒</view>
    <view class="add-btn" bindtap="navigateToAdd">
      <text class="iconfont icon-add">+</text>
    </view>
  </view>
  
  <view class="reminder-list" wx:if="{{!loading && reminders.length > 0}}">
    <view class="reminder-card" 
          wx:for="{{reminders}}" 
          wx:key="id"
          bindtap="navigateToDetail"
          data-id="{{item.id}}">
      <view class="reminder-header">
        <view class="reminder-name">{{item.name}}</view>
        <view class="reminder-toggle" catchtap="toggleReminder" data-id="{{item.id}}" data-active="{{item.is_active}}">
          <switch checked="{{item.is_active}}" color="#1aad19" />
        </view>
      </view>
      
      <view class="reminder-info">
        <view class="reminder-times">
          <text class="icon-time">⏰</text>
          <block wx:for="{{item.times.split(',')}}" wx:for-item="time" wx:key="*this">
            <text class="time-tag">{{time}}</text>
          </block>
        </view>
        
        <view class="reminder-frequency">
          <text class="icon-calendar">📅</text>
          <text wx:if="{{item.frequency === 'daily'}}">每天</text>
          <text wx:elif="{{item.frequency === 'weekly'}}">
            每周
            <block wx:for="{{item.weekdays.split(',')}}" wx:for-item="day" wx:key="*this">
              {{['日', '一', '二', '三', '四', '五', '六'][day]}}
            </block>
          </text>
          <text wx:elif="{{item.frequency === 'monthly'}}">
            每月 {{item.month_days.replace(/,/g, '日、')}}日
          </text>
          <text wx:elif="{{item.frequency === 'custom'}}">
            每{{item.custom_interval}}天
          </text>
        </view>
      </view>
      
      <view class="reminder-description" wx:if="{{item.description}}">
        {{item.description}}
      </view>
    </view>
  </view>
  
  <!-- 使用用时注入的组件 -->
  <!-- 空状态组件 - 仅在需要时才会被注入和渲染 -->
  <empty-state wx:if="{{$emptyState}}"
               id="emptyState"
               icon="{{$emptyState.icon}}"
               title="{{$emptyState.title}}"
               message="{{$emptyState.message}}"
               type="{{$emptyState.type}}"
               actionText="{{$emptyState.actionText}}"
               bind:action="handleEmptyStateAction" />
  
  <!-- Toast组件 - 仅在需要时才会被注入和渲染 -->
  <toast wx:if="{{$toast}}"
         id="toast"
         type="{{$toast.type}}"
         message="{{$toast.message}}"
         duration="{{$toast.duration}}" />
  
  <!-- Loading组件 - 仅在需要时才会被注入和渲染 -->
  <loading-indicator wx:if="{{$loading}}"
                    id="loading"
                    title="{{$loading.title}}" />
  
  <!-- Modal组件 - 仅在需要时才会被注入和渲染 -->
  <modal wx:if="{{$modal}}"
         id="modal"
         title="{{$modal.title}}"
         content="{{$modal.content}}"
         showCancel="{{$modal.showCancel}}"
         cancelText="{{$modal.cancelText}}"
         confirmText="{{$modal.confirmText}}"
         bind:action="handleModalAction" />
  
  <!-- 加载中状态 - 静态渲染 -->
  <view class="native-loading-state" wx:if="{{loading}}">
    <view class="loading-icon"></view>
    <view class="loading-text">加载中...</view>
  </view>
</view> 