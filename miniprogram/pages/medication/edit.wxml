<view class="container">
  <form bindsubmit="saveReminder">
    <view class="form-group">
      <text class="label">药物名称</text>
      <input name="name" value="{{reminder.name}}" placeholder="请输入药物名称" />
    </view>

    <view class="form-group">
      <text class="label">描述</text>
      <textarea name="description" value="{{reminder.description}}" placeholder="请输入药物描述" />
    </view>

    <view class="form-group">
      <text class="label">提醒频率</text>
      <picker mode="selector" range="{{frequencies}}" value="{{frequencyIndex}}" bindchange="onFrequencyChange">
        <view class="picker">{{frequencies[frequencyIndex]}}</view>
      </picker>
    </view>

    <block wx:if="{{frequencyIndex === 1}}">
      <view class="form-group">
        <text class="label">选择星期</text>
        <view class="weekdays">
          <view wx:for="{{weekdays}}" wx:key="index" 
                class="weekday {{selectedWeekdays[index] ? 'selected' : ''}}"
                bindtap="toggleWeekday" data-index="{{index}}">
            {{item}}
          </view>
        </view>
      </view>
    </block>

    <view class="form-group">
      <text class="label">提醒时间</text>
      <view class="times-container">
        <view wx:for="{{times}}" wx:key="index" class="time-item">
          <picker mode="time" value="{{item}}" bindchange="onTimeChange" data-index="{{index}}">
            <view class="time-picker">{{item}}</view>
          </picker>
          <view class="delete-time" bindtap="deleteTime" data-index="{{index}}">×</view>
        </view>
        <view class="add-time" bindtap="addTime" wx:if="{{times.length < 5}}">
          <text>+</text>
        </view>
      </view>
    </view>

    <view class="form-group">
      <text class="label">结束日期</text>
      <picker mode="date" value="{{endDate}}" start="{{today}}" bindchange="onEndDateChange">
        <view class="picker">{{endDate || '请选择结束日期'}}</view>
      </picker>
    </view>

    <button class="submit-btn" form-type="submit" type="primary">保存修改</button>
  </form>
</view> 