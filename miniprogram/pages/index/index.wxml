<!--index.wxml-->
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <view class="page-header">
      <view class="page-title">å¥åº·æé†’</view>
      <view class="add-btn" bindtap="navigateToAdd">
        <text class="icon-add">+</text>
      </view>
    </view>
    
    <!-- é”™è¯¯é‡è¯• -->
    <view class="error-container" wx:if="{{error}}">
      <view class="error-icon">âŒ</view>
      <view class="error-text">{{errorMessage || 'åŠ è½½å¤±è´¥'}}</view>
      <button class="retry-btn" bindtap="retry">é‡æ–°åŠ è½½</button>
    </view>
    
    <!-- å¥åº·æé†’åˆ—è¡¨ -->
    <view class="reminder-list" wx:if="{{!loading && !error && reminders.length > 0}}">
      <view class="reminder-card" wx:for="{{reminders}}" wx:key="id">
        <view class="reminder-header">
          <view class="reminder-name">{{item.name}}</view>
          <view class="reminder-actions">
            <view class="reminder-toggle" catchtap="toggleReminder" data-id="{{item.id}}" data-active="{{item.is_active}}">
              <switch checked="{{item.is_active}}" color="#1aad19" />
            </view>
            <view class="action-buttons">
              <button class="btn-edit" catchtap="navigateToEdit" data-id="{{item.id}}">ç¼–è¾‘</button>
              <button class="btn-delete" catchtap="deleteReminder" data-id="{{item.id}}">åˆ é™¤</button>
            </view>
          </view>
        </view>
        
        <view class="reminder-info" bindtap="navigateToDetail" data-id="{{item.id}}">
          <view class="reminder-times">
            <text class="icon-time">â°</text>
            <block wx:for="{{item.times}}" wx:for-item="time" wx:key="*this">
              <text class="time-tag">{{time}}</text>
            </block>
          </view>
          
          <view class="reminder-frequency">
            <text class="icon-calendar">ğŸ“…</text>
            <text wx:if="{{item.frequency === 'daily'}}">æ¯å¤©</text>
            <text wx:elif="{{item.frequency === 'weekly'}}">
              æ¯å‘¨
              <block wx:for="{{[0,1,2,3,4,5,6]}}" wx:for-item="index" wx:key="*this">
                <text wx:if="{{item.weekdays[index] === '1'}}">{{['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'][index]}}</text>
              </block>
            </text>
            <text wx:elif="{{item.frequency === 'monthly'}}">
              æ¯æœˆ {{item.month_days}}æ—¥
            </text>
            <text wx:elif="{{item.frequency === 'custom'}}">
              æ¯{{item.custom_interval}}å¤©
            </text>
          </view>
        </view>
        
        <view class="reminder-description" wx:if="{{item.description}}">
          {{item.description}}
        </view>
      </view>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{!loading && !error && reminders.length === 0}}">
      <view class="empty-image">ğŸ“‹</view>
      <view class="empty-text">æ‚¨è¿˜æ²¡æœ‰æ·»åŠ å¥åº·æé†’</view>
      <button class="btn-primary" bindtap="navigateToAdd">æ·»åŠ å¥åº·æé†’</button>
    </view>
    
    <!-- åŠ è½½ä¸­çŠ¶æ€ -->
    <view class="loading-state" wx:if="{{loading}}">
      <view class="loading-icon"></view>
      <view class="loading-text">åŠ è½½ä¸­...</view>
    </view>
  </view>
</scroll-view>
